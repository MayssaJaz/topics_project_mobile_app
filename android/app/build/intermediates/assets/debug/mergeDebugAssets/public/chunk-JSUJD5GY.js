import{a as re,e as te}from"./chunk-7KEMS7IJ.js";import{a as Y,x as Z,y as ee}from"./chunk-W6UDVYDR.js";import{$ as d,$a as O,$b as U,Ea as M,Fb as z,Jb as J,Ka as R,M as n,Oa as k,P as x,V as t,Va as i,Vb as K,Wa as G,Wb as Q,Xa as L,Ya as D,Z as m,Za as A,_ as u,_a as H,ab as B,ac as X,db as W,ea as h,fb as V,j as P,m as _,na as c,u as l,yb as $,zb as j}from"./chunk-KG5FX6JE.js";import"./chunk-EQWFYTHX.js";import"./chunk-QPPST4YU.js";import"./chunk-IXFPWM3A.js";import"./chunk-3BFGMDL6.js";import"./chunk-G3CV3VGG.js";import"./chunk-PXSONQDE.js";import"./chunk-MS5FDQK3.js";import"./chunk-GCVURZBX.js";import"./chunk-4U6PRYVA.js";import"./chunk-QXT6YJJ4.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{g as I}from"./chunk-OLRFWS6T.js";re({chevronBackOutline:te});var oe=s=>{var e,r;let o=(e=s.get("email"))==null?void 0:e.value,ie=(r=s.get("confirmeEmail"))==null?void 0:r.value;return o===ie?null:{emailsNotMatching:!0}},be=(()=>{let o=class o{constructor(){this.authService=l(ee),this.fb=l(W),this.router=l(k),this.toastService=l(Z),this.location=l(M),this.PASSWORD_MIN_LENGTH=6,this.registerForm=this.fb.group({name:["",[i.required]],familyName:["",[i.required]],password:["",[i.required,i.minLength(this.PASSWORD_MIN_LENGTH)]],email:["",[i.required,i.email]],confirmeEmail:["",[i.required,i.email]]},{validators:oe}),this.errorText$=this.registerForm.events.pipe(_(e=>e instanceof A||e instanceof D),P(()=>{var e,r,a,g,f,p,C,v,E,T,y,b,N,S,F,w,q;return(e=this.registerEmailControl)!=null&&e.errors&&((r=this.registerEmailControl)!=null&&r.errors.required)||(a=this.registerConfirmeEmailControl)!=null&&a.errors&&((g=this.registerConfirmeEmailControl)!=null&&g.errors.required)||(f=this.registerNameControl)!=null&&f.errors&&((p=this.registerNameControl)!=null&&p.errors.required)||(C=this.registerFamilyNameControl)!=null&&C.errors&&((v=this.registerFamilyNameControl)!=null&&v.errors.required)||(E=this.registerPasswordControl)!=null&&E.errors&&((T=this.registerPasswordControl)!=null&&T.errors.required)?"This field is required":(y=this.registerPasswordControl)!=null&&y.errors&&((b=this.registerPasswordControl)!=null&&b.errors.minlength)?`Password should have at least ${this.PASSWORD_MIN_LENGTH} characters`:(N=this.registerEmailControl)!=null&&N.errors&&((S=this.registerEmailControl)!=null&&S.errors.email)?"E-mail not valid":(F=this.registerConfirmeEmailControl)!=null&&F.errors&&((w=this.registerConfirmeEmailControl)!=null&&w.errors.required)||this.registerForm.value.email!=this.registerForm.value.email?"This field is required":(q=this.registerForm.errors)!=null&&q.emailsNotMatching?"Emails do not match":""})),this.errorText=Y(this.errorText$)}get registerEmailControl(){return this.registerForm.get("email")}get registerConfirmeEmailControl(){return this.registerForm.get("confirmeEmail")}get registerNameControl(){return this.registerForm.get("name")}get registerFamilyNameControl(){return this.registerForm.get("familyName")}get registerPasswordControl(){return this.registerForm.get("password")}cancel(){this.location.back()}onSubmit(){return I(this,null,function*(){if(this.registerForm.value.email&&this.registerForm.value.password&&this.registerForm.value.name&&this.registerForm.value.familyName)try{yield this.authService.register(this.registerForm.value.email,this.registerForm.value.name,this.registerForm.value.familyName,this.registerForm.value.password),this.toastService.presentToast("Please confirm your email and go back to login","success")}catch(e){console.log(e),this.toastService.presentToast("A error happened while creating your accounting. Try again!","danger")}})}};o.\u0275fac=function(r){return new(r||o)},o.\u0275cmp=x({type:o,selectors:[["app-register"]],decls:17,vars:9,consts:[[3,"ngSubmit","formGroup"],["slot","start"],[3,"click"],["name","arrow-back"],["slot","end"],["type","submit",3,"disabled","strong"],[1,"ion-padding",3,"fullscreen"],["formControlName","email","fill","solid","name","email","label","Enter register email","labelPlacement","floating","placeholder","email",3,"helperText"],["formControlName","confirmeEmail","fill","solid","name","confirmeEmail","label","Enter register email","labelPlacement","floating","placeholder","confirme email",3,"helperText"],["formControlName","name","fill","solid","name","name","label","Enter your name","labelPlacement","floating","placeholder","name",3,"helperText"],["formControlName","familyName","fill","solid","name","familyName","label","Enter register family name","labelPlacement","floating","placeholder","family name",3,"helperText"],["formControlName","password","fill","solid","name","password","type","password","label","Enter register password","labelPlacement","floating","placeholder","register password",3,"helperText"]],template:function(r,a){r&1&&(m(0,"form",0),h("ngSubmit",function(){return a.onSubmit()}),m(1,"ion-header")(2,"ion-toolbar")(3,"ion-buttons",1)(4,"ion-button",2),h("click",function(){return a.cancel()}),d(5,"ion-icon",3),u()(),m(6,"ion-title"),c(7,"register"),u(),m(8,"ion-buttons",4)(9,"ion-button",5),c(10,"Register"),u()()()(),m(11,"ion-content",6),d(12,"ion-input",7)(13,"ion-input",8)(14,"ion-input",9)(15,"ion-input",10)(16,"ion-input",11),u()()),r&2&&(t("formGroup",a.registerForm),n(9),t("disabled",a.registerForm.invalid)("strong",!0),n(2),t("fullscreen",!0),n(),t("helperText","Enter a email in the format user@email.com to be registered"),n(),t("helperText","Confirme your e-mail"),n(),t("helperText","Enter register name"),n(),t("helperText","Enter your family name"),n(),t("helperText","Enter a password with at least "+a.PASSWORD_MIN_LENGTH+" characters."))},dependencies:[V,H,G,L,O,B,R,z,J,K,Q,$,j,X,U],encapsulation:2});let s=o;return s})();export{be as RegisterPage,oe as emailMatchValidator};
