import{a as W,y as B}from"./chunk-W6UDVYDR.js";import{$ as C,$a as L,Fb as q,Jb as k,Ka as T,M as a,Oa as E,P as b,V as n,Va as u,Vb as A,Wa as P,Wb as H,Xa as F,Ya as N,Z as i,Za as y,_ as s,_a as I,ab as x,ac as O,db as G,ea as p,fb as M,j as w,m as _,na as m,u as g,yb as R,zb as D}from"./chunk-KG5FX6JE.js";import"./chunk-EQWFYTHX.js";import"./chunk-QPPST4YU.js";import"./chunk-IXFPWM3A.js";import"./chunk-3BFGMDL6.js";import"./chunk-G3CV3VGG.js";import"./chunk-PXSONQDE.js";import"./chunk-MS5FDQK3.js";import"./chunk-GCVURZBX.js";import"./chunk-4U6PRYVA.js";import"./chunk-QXT6YJJ4.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{g as v}from"./chunk-OLRFWS6T.js";var ee=(()=>{let r=class r{constructor(){this.authService=g(B),this.fb=g(G),this.router=g(E),this.PASSWORD_MIN_LENGTH=4,this.loginForm=this.fb.group({password:["",[u.required,u.minLength(this.PASSWORD_MIN_LENGTH)]],email:["",[u.required,u.email]]}),this.errorText$=this.loginForm.events.pipe(_(o=>o instanceof y||o instanceof N),w(()=>{var o,e,t,l,h,c,f,S;return(o=this.loginEmailControl)!=null&&o.errors&&((e=this.loginEmailControl)!=null&&e.errors.required)||(t=this.loginPasswordControl)!=null&&t.errors&&((l=this.loginPasswordControl)!=null&&l.errors.required)?"This field is required":(h=this.loginPasswordControl)!=null&&h.errors&&((c=this.loginPasswordControl)!=null&&c.errors.minlength)?`Password should have at least ${this.PASSWORD_MIN_LENGTH} characters`:(f=this.loginEmailControl)!=null&&f.errors&&((S=this.loginEmailControl)!=null&&S.errors.email)?"E-mail not valid":""})),this.errorText=W(this.errorText$)}get loginEmailControl(){return this.loginForm.get("email")}get loginPasswordControl(){return this.loginForm.get("password")}onSubmit(){return v(this,null,function*(){var o;if(this.loginForm.value.email&&this.loginForm.value.password){let e=yield this.authService.login(this.loginForm.value.email,this.loginForm.value.password);(o=e==null?void 0:e.user)!=null&&o.email&&(this.loginForm.reset(),this.router.navigate(["/topics"]))}})}goToRegister(){this.router.navigate(["/register"])}forgotPassword(){this.router.navigate(["/forget-password"])}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=b({type:r,selectors:[["app-login"]],decls:15,vars:6,consts:[[3,"ngSubmit","formGroup"],["slot","end"],["type","submit",3,"disabled","strong"],[1,"ion-padding",3,"fullscreen"],["formControlName","email","fill","solid","name","email","label","Enter login email","labelPlacement","floating","placeholder","login email",3,"helperText"],["formControlName","password","fill","solid","name","password","type","password","label","Enter login password","labelPlacement","floating","placeholder","login password",3,"helperText"],["expand","full","fill","clear",3,"click"]],template:function(e,t){e&1&&(i(0,"form",0),p("ngSubmit",function(){return t.onSubmit()}),i(1,"ion-header")(2,"ion-toolbar")(3,"ion-title"),m(4,"Login"),s(),i(5,"ion-buttons",1)(6,"ion-button",2),m(7,"Login"),s()()()(),i(8,"ion-content",3),C(9,"ion-input",4)(10,"ion-input",5),i(11,"ion-button",6),p("click",function(){return t.forgotPassword()}),m(12,"You forgot your password?"),s(),i(13,"ion-button",6),p("click",function(){return t.goToRegister()}),m(14,"Create account"),s()()()),e&2&&(n("formGroup",t.loginForm),a(6),n("disabled",t.loginForm.invalid)("strong",!0),a(2),n("fullscreen",!0),a(),n("helperText","Enter a login email in the format user@email.com"),a(),n("helperText","Enter a password with at least "+t.PASSWORD_MIN_LENGTH+" characters."))},dependencies:[q,k,A,H,R,D,O,M,I,P,F,L,x,T],encapsulation:2});let d=r;return d})();export{ee as LoginPage};
